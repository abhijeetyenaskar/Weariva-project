<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{wearivalayout::layout(~{::section})}"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
  </head>
  <body>
    <section
      class="fade-in fixed z-50 bg-[url('/images/forget.jpg')] bg-cover top-0 right-0 left-0 bottom-0 flex justify-center items-center"
    >
      <a
        href="/"
        class="absolute top-3 left-3 block px-5 py-1 cursor-pointer z-50 bg-lighnavi hover:bg-darknavi shadow-sm rounded-full hover:scale-105 active:scale-100 hover:text-md text-white duration-500"
        >Back</a
      >
      <div
        th:if="${success}"
        class="absolute top-2 w-full sm:w-[60vw] md:w-[50vw] lg:w-[35vw] mx-auto left-0 right-0 flex justify-center items-center my-2 z-50"
      >
        <p
          id="success-message"
          class="text-nowrap border-2 h-12 flex justify-center items-center p-0 rounded-lg w-0 overflow-hidden bg-darknavi border-white text-sm first-letter:text-lightgrey text-white text-center font-medium transition-all duration-1000"
        >
          [[${success}]]
        </p>
      </div>
      <div
        class="absolute top-2 w-full sm:w-[60vw] md:w-[50vw] lg:w-[35vw] mx-auto left-0 right-0 flex justify-center items-center my-2 z-50"
      >
        <th:block th:if="${param.error}">
          <p
            id="error-message"
            class="text-nowrap border-2 h-12 flex justify-center items-center p-0 rounded-lg w-0 overflow-hidden bg-darknavi border-white text-sm first-letter:text-lightgrey text-white text-center font-medium transition-all duration-1000"
          >
            [[${session.SPRING_SECURITY_LAST_EXCEPTION.message}]]
          </p>
        </th:block>

        <th:block th:if="${param.logout}">
          <p
            id="logout-message"
            class="text-nowrap border-2 h-12 flex justify-center items-center p-0 rounded-lg w-0 overflow-hidden bg-darknavi border-white text-sm first-letter:text-lightgrey text-white text-center font-medium transition-all duration-1000"
          >
            Successfully Logout
          </p>
        </th:block>
        <script th:inline="javascript">
          const error = document.getElementById("error-message");
          const logout = document.getElementById("logout-message");
          const success = document.getElementById("success-message");
          if (success != null) {
            success.style.width = "0px";
            success.style.width = "100%";
            success.style.padding = "5px";
            success.classList.add("tracking-in-expand");
            setTimeout(() => {
              success.innerText = "";
              success.style.width = "0px";
              success.style.border = "none";
              success.style.paddingInline = "0px";
            }, 3000);
          }
          if (error != null) {
            error.style.width = "0px";
            error.style.width = "100%";
            error.style.padding = "5px";
            error.classList.add("tracking-in-expand");
            setTimeout(() => {
              error.innerText = "";
              error.style.width = "0px";
              error.style.border = "none";
              error.style.paddingInline = "0px";
            }, 3000);
          }
          if (logout != null) {
            logout.style.width = "0px";
            logout.style.width = "100%";
            logout.style.padding = "5px";
            logout.classList.add("tracking-in-expand");
            setTimeout(() => {
              logout.innerText = "";
              logout.style.width = "0px";
              logout.style.border = "none";
              logout.style.paddingInline = "0px";
            }, 3000);
          }
        </script>
      </div>

      <div class="absolute top-0 right-0 bottom-0 left-0 flex h-[700px] w-full">
        <div
          class="relative p-3 w-full flex flex-col items-center justify-center"
        >
          <form
            th:action="@{/login}"
            method="POST"
            class="md:w-96 w-80 flex flex-col items-center justify-center"
          >
            <h2
              class="text-5xl text-darknavi font-medium first-letter:text-lighnavi"
            >
              Weariva Login
            </h2>
            <p class="text-sm text-gray-500/90 mt-3">
              Welcome back! Please sign in to continue
            </p>
            <div
              class="flex items-center w-full bg-transparent border border-stone-500/60 h-12 mt-6 rounded-full overflow-hidden pl-6 gap-2 backdrop-blur-sm"
            >
              <input
                type="username"
                name="username"
                placeholder="Username"
                class="bg-transparent text-stone-700/80 placeholder-stone-700/80 outline-none text-sm w-full h-full"
                autocomplete="true"
                required
              />
            </div>

            <div
              class="flex items-center mt-6 w-full bg-transparent border border-stone-500/60 h-12 rounded-full overflow-hidden pl-6 gap-2"
            >
              <input
                type="password"
                placeholder="Password"
                name="password"
                class="bg-transparent text-stone-800/80 placeholder-stone-800/80 outline-none text-sm w-full h-full"
                required
              />
            </div>

            <div
              class="w-full flex items-center justify-end mt-3 text-gray-500/80"
            >
              <a
                class="text-sm text-gray-500 hover:text-gray-900 transition-all duration-300"
                th:href="@{/forgetpassword}"
                >Forgot password?</a
              >
            </div>

            <button
              type="submit"
              class="mt-3 w-full h-11 rounded-full text-white bg-darknavi hover:bg-lighnavi duration-300 transition-colors"
            >
              Login
            </button>
          </form>
          <p class="text-gray-500/90 text-sm mt-4">
            Donâ€™t have an account?
            <a
              class="text-gray-500 hover:text-gray-800 transition-all duration-300"
              th:href="@{/signup}"
              >Sign up</a
            >
          </p>
        </div>
      </div>
    </section>
  </body>
</html>
