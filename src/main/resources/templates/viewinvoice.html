<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Weariva Ecommerce Invoice</title>
    <link
      rel="shortcut icon"
      th:href="@{/images/favicon.png}"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="" data-th-href="@{/css/output.css}" />
    <style>
      @media print {
        .no-print {
          display: none !important;
        }
      }
    </style>
  </head>
  <body class="bg-gray-100 p-6 flex justify-center items-center min-h-screen">
    <div class="max-w-4xl relative mx-auto bg-white p-8 shadow-md rounded-lg">
      <div class="text-xs no-print absolute bottom-2 right-5">
        <button
          class="active:scale-95 rounded-full px-5 bg-darknavi text-white"
          id="print-invoice"
        >
          Print
        </button>
        <a class="active:scale-95 rounded-full px-5 bg-darknavi text-white" href="/">Home</a>
      </div>
      <script>
        const printInvoice = document.getElementById("print-invoice");
        printInvoice.onclick = (e) => {
          window.print();
        };
      </script>
      <!-- Header -->
      <div class="flex justify-between items-center border-b pb-4 mb-6">
        <div>
          <h1 class="text-4xl text-darknavi">INVOICE</h1>
          <p class="text-sm text-gray-500">Weariva E-commerce</p>
          <p class="text-sm text-gray-500">support@weariva.com | 8596785485</p>
        </div>
        <div class="text-right">
          <p class="text-sm text-gray-500">Invoice #</p>
          <p class="font-semibold" th:text="'INV-' + ${order.orderId}"></p>
          <p class="text-sm text-gray-500">Date</p>
          <p
            class="font-semibold"
            th:text="${#temporals.format(order.orderDate, 'dd-MM-yyyy')}"
          ></p>
        </div>
      </div>

      <!-- Customer & Shipping -->
      <div class="grid grid-cols-2 gap-6 mb-6">
        <div>
          <h2 class="font-semibold text-navi mb-2">Billed To</h2>
          <p class="text-gray-800" th:text="${order.user.name}"></p>
          <p class="text-gray-600 text-xs" th:text="${order.user.email}"></p>
        </div>
        <div>
          <h2 class="font-semibold text-navi mb-2">Shipping Address</h2>
          <p class="text-gray-800 text-xs">
            [[${order.orderAddress.street}]],[[${order.orderAddress.city}]],[[${order.orderAddress.state}]],[[${order.orderAddress.country}]],
            Pin - [[${order.user.pin}]]
          </p>
        </div>
      </div>

      <!-- Items Table -->
      <div class="overflow-x-auto mb-3">
        <table class="min-w-full text-sm shadow">
          <thead class="bg-gray-200">
            <tr>
              <th class="px-4 py-2 border text-left">Item</th>
              <th class="px-4 py-2 border text-right">Quantity</th>
              <th class="px-4 py-2 border text-right">Price</th>
              <th class="px-4 py-2 border text-right">Subtotal</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="item : ${order.items}" class="hover:bg-gray-50">
              <td class="px-4 py-2 border">
                [[${item.productName}]] ([[${item.discount}]]%)
              </td>
              <td
                class="px-4 py-2 border text-right"
                th:text="${item.quantity}"
              ></td>
              <td
                class="px-4 py-2 border text-right"
                th:text="'₹' + ${item.discountedPrice}"
              ></td>
              <td
                class="px-4 py-2 border text-right font-semibold"
                th:text="'₹' + ${item.quantity * item.discountedPrice}"
              ></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Summary -->
      <div class="flex justify-end pr-5">
        <div class="w-1/3">
          <div class="flex justify-between mb-2">
            <span class="text-gray-500">Delivery Fees</span>
            <span class="font-semibold" th:text="'₹ 20.0'"></span>
          </div>
          <div class="flex justify-between border-t pt-2">
            <span class="text-lg font-bold">Total</span>
            <span
              class="text-lg font-bold"
              th:text="'₹' + ${order.totalOrderAmount}"
            ></span>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="text-center mt-8 border-t pt-4 text-gray-500">
        <p>Thank you for shopping with Weariva!</p>
        <p class="text-xs">This is a computer-generated invoice.</p>
      </div>
    </div>
  </body>
</html>
